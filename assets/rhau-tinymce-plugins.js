(()=>{"use strict";function a(t){const l="Select some plain text to enable",u="Add link to file";t.addButton("rhau_link_to_file",{title:"Add link to file",tooltip:l,icon:"rhau-link-to-file dashicons dashicons-paperclip",disabled:!0,onclick:r,onPostRender:function(){const n=this.getEl().querySelector("button")}});function r(){const n=t.selection.getContent();if(!n){alert("Please select the text you want to link.");return}const o=wp.media({title:"Select File",library:{type:["application/pdf","application/zip"]},multiple:!1,button:{text:"Select"}});function i(){const c=o.state().get("selection").first().toJSON();t.execCommand("mceInsertContent",!1,'<a href="'.concat(c.url,'" target="_blank" download>').concat(n,"</a>"))}o.on("select",i).open()}function e(){const n=t.controlManager.buttons.rhau_link_to_file;if(!n)return;const o=t.selection.getContent(),i=!!o,c=!/<\/?[a-z][\s\S]*>/i.test(o),s=!i||!c;n.disabled(s),n.settings.tooltip=s?l:u}t.on("NodeChange",e),t.on("KeyUp",e),t.on("KeyDown",e),t.on("MouseUp",e),t.on("MouseDown",e)}(function(){tinymce.create("tinymce.plugins.rhauTinyMcePlugins",{init:function(t,l){a(t)},createControl:function(t,l){return null}}),tinymce.PluginManager.add("rhauTinyMcePlugins",tinymce.plugins.rhauTinyMcePlugins)})()})();
